<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora</title>
    <style>

        html {
            height: 100%;
        }

        body {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: 1fr 2fr;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;    
        }

        /*Esta parte do CSS é para estilizar os campos de display e os botões de memória que ficam na seção idSectionDisplay*/
        #idSectionDisplay {
            grid-column: 1 / span 4;
            grid-row: 1;
            display: grid;
            grid-template-columns: 1fr;
            grid-template-rows: repeat(autofit, minmax(100px, 1fr));
            background-color: #dddddd;
        }

        #idSectionDisplayFields {
            grid-column: 1;
            grid-row: 1;
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(autofit, minmax(100px, 1fr));
        }

        #idFieldDisplayOperation {
            grid-column: 2/ span 2;
            grid-row: 1;
            display: flex;
            align-self: flex-end;
            height: fit-content;
            text-align: right;
            margin-right: 10px;
            margin-top: 50px;
            background-color: #dddddd ;
            border: none;
            font-size: 18px;   
        }

        #idFieldDisplayNumber {
            grid-column: 1 / span 3;
            grid-row: 2;
            background-color: #dddddd;
            text-align: right;
            margin-right: 10px;
            height: fit-content;
            font-size: 70px;
            font-weight: 600;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            border: none; 
        }

        input::-webkit-inner-spin-button, 
        input::-webkit-outer-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        #idSectionDisplayFields input:focus {
            outline: none;
        }

        #idSectionMemory {
            grid-column: 1;
            grid-row: 2;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            width: 35%;
        }

        #idSectionMemory button {
            font-size: 14px;
            font-weight: 600;
            background-color: #dddddd;
            border: none;
            padding: 10px 0px;
        }

        #idSectionMemory button:hover  {
            background-color: #bbbbbb;
        }

        /*Esta parte do CSS é para estilizar os botões e sua disposição na tela dentro da section idSectionNumbers*/
        #idSectionNumbers {
            grid-column: 1 / span 4;
            grid-row-start: 2;
            display: grid;
            grid-template-rows: repeat(6, 1fr);
            background-color: #dddddd;
        }

        .groupOfButtons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
        }

        .groupOfButtons button {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 1px;
            border: none;
        }

        .groupOfButtons button:hover {
            background-color: #bbbbbb;
        }

        .groupOfButtons .number {
            font-size: 25px;
            font-weight: 600;
            background-color: #ffffff;
        }

        .groupOfButtons .operators {
            background-color: #eeeeee;
            font-size: 22px;
            font-weight: 300;
        }

        #idDivision, #idMultiplication,
        #idMinus, #idPlus {
            font-size: 30px;
        }

        .groupOfButtons .cleaners {
            background-color: #eeeeee;
            font-size: 22px;
            font-weight: 400;
        }

        #idClearLast img{
            width: 30px;
            vertical-align: middle;
        }

        #idEqual {
            background-color: rgba(0, 106, 255, 0.317);
            font-size: 30px;
            font-weight: 300;
        }

        #idEqual:hover {
            background-color: rgba(0, 106, 255, 0.559);
        }

        /*Esta parte do CSS estiliza os botões e campos da section idMemory */
        #idMemory {
            grid-column: 5;
            grid-row: 1 / span 2;
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: 50px auto;
            background-color: #dddddd;
        }

        #idBtnMemory {
            grid-column: 2;
            grid-row: 1;
        }

        #idBtnHistoric {
            grid-column: 1;
            grid-row: 1;
        }
 
        #idMemory button {
            background-color: #dddddd;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            border: none;
            font-size: 16px;
            font-weight: 500;
            text-align: center;
        }

        #idMemory button:focus {
            border-bottom: 3px solid rgb(0, 106, 255); 
            margin: 0px 20px;
            outline: none;           
        }

    </style>
</head>
<body>

    <div id="idSectionDisplay">
        <div id="idSectionDisplayFields">
            <input type="text" id="idFieldDisplayOperation" name="nmFieldDisplayOperation" readonly> <br>
            <input type="text" id="idFieldDisplayNumber" name="nmFieldDisplayNumber" value="" maxlength="21">
        </div>
        <div id="idSectionMemory">
            <button type="button" id="idCleanMemory" value="mc">MC</button>
            <button type="button" id="idMemoryRecovery" value="mr">MR</button>
            <button type="button" id="idMemoryPlus" value="m+">M+</button>
            <button type="button" id="idMemoryMinus" value="m-">M-</button>
            <button type="button" id="idMemoryStorage" value="ms">MS</button>
        </div>
    </div>
    <div id="idSectionNumbers" >
        <div class="groupOfButtons">
            <button type="button" id="idPercent" value="%" class="operators">%</button>
            <button type="button" id="idClearEntry" value="ce" class="cleaners">CE</button>
            <button type="button" id="idClear" value="c" class="cleaners">C</button>
            <button type="button" id="idClearLast" value="cl" class="cleaners"><img src="images/clear.png" class="clIcon"></button>
        </div>
        <div class="groupOfButtons">
            <button type="button" id="idInverse" value="inverse" class="operators">1/x</button>
            <button type="button" id="idSquared" value="squared" class="operators">x²</button>
            <button type="button" id="idSquareRoot" value="squareroot" class="operators">√x</button>
            <button type="button" id="idDivision" value="/" class="operators">÷</button>
        </div>
        <div class="groupOfButtons">
            <button type="button" id="idSeven" value="7" class="number">7</button>
            <button type="button" id="idEight" value="8" class="number">8</button>
            <button type="button" id="idNine" value="9" class="number">9</button>
            <button type="button" id="idMultiplication" value="*" class="operators">x</button>
        </div>
        <div class="groupOfButtons">
            <button type="button" id="idFour" value="4" class="number">4</button>
            <button type="button" id="idFive" value="5" class="number">5</button>
            <button type="button" id="idSix" value="6" class="number">6</button>
            <button type="button" id="idMinus" value="-" class="operators">-</button>
        </div>
        <div class="groupOfButtons">
            <button type="button" id="idOne" value="1" class="number">1</button>
            <button type="button" id="idTwo" value="2" class="number">2</button>
            <button type="button" id="idThree" value="3" class="number">3</button>
            <button type="button" id="idPlus" value="+" class="operators">+</button>
        </div>
        <div class="groupOfButtons">
            <button type="button" id="idPositiveOrNegative" value="+/-" class="number">+/-</button>
            <button type="button" id="idZero" value="0" class="number">0</button>
            <button type="button" id="idPoint" value="," class="number">,</button>
            <button type="button" id="idEqual" value="=" class="operators">=</button>
        </div>
    </div>
    <div id="idMemory">
        <button type="button" id="idBtnHistoric">Histórico</button>
        <button type="button" id="idBtnMemory">Memória</button>
        
        <div id="idDisplayHistoricOrMemory">

        </div>
    </div>

    <script>

        var displayedNumber = "0";
        var isSecondNumber = false;
        var secondNumberChanged = false;
        var lastOperatorEqual = false;
        var isReseted = false;
        var isDisabled = false;
        var firstNumber = null;
        var secondNumber = null;
        var calcResult = null;
        var arithmeticOperator = "";
        var displayedOperation = "";
        var formatOperationToDisplay = null;
        var isFormated = false;
        var firstNumberToDisplay  = null;
        var secondNumberToDisplay = null;
        var isSecondNumberToDisplay = false;
        var historicOperation = [];
        var historicResult = [];
        var memoryNumbers = [];

        var btnHistoric = document.getElementById("idBtnHistoric");
        var btnMemory = document.getElementById("idBtnMemory");

        var buttonMemoryArea;
        var memoryArea = document.getElementById("idSectionMemory");

        memoryArea.addEventListener("click", memoryOperations);

        function memoryOperations(event) {
            buttonMemoryArea = document.getElementById(event.target.id);
        };

        var fieldDisplayOperation = document.getElementById("idFieldDisplayOperation");
        var fieldDisplayNumber = document.getElementById("idFieldDisplayNumber");

        fieldDisplayNumber.value = displayedNumber;

        window.addEventListener("keydown", function(event){

            var key = event.key;

            if (isDisabled) {
                var buttons = document.getElementsByClassName("operators");
                document.getElementById("idPositiveOrNegative").disabled = false;
                document.getElementById("idPoint").disabled = false;
                for (let button of buttons) {
                        if (button.id != "idEqual") {
                            button.disabled = false;
                        }
                }
                displayedNumber = "0";
                displayedOperation = "";
                isDisabled = false;
            }

            if (key === "Backspace") {
                displayedNumber = backspace(displayedNumber);
                event.preventDefault();
            } else if (key === "Delete") {
                var response = deleteNumber(displayedNumber);
                displayedNumber = response[0];
                if (response[1] != null){
                    displayedOperation = response[1];
                }
                event.preventDefault();
            } else if (key === "Escape") {
                displayedNumber = clearAll(displayedNumber);
                event.preventDefault();
            } else if ((key >= 0 && key <= 9) || (key === ",")) {
                displayedNumber = setupNumber(key);
                event.preventDefault();
            } else if ((key == "+") || (key == "-") || (key == "*") || (key == "/")) {
                var response = setupOperator(key);
                displayedNumber = response[0];
                displayedOperation = response[1];
                event.preventDefault();
            }
            
            fieldDisplayOperation.value = displayedOperation;
            fieldDisplayNumber.value = formatDisplayedNumber(displayedNumber);
        });

        var buttonNumbersArea;        
        var numbersArea = document.getElementById("idSectionNumbers")

        numbersArea.addEventListener("click", setupClassification);

        function setupClassification(event){

            buttonNumbersArea = document.getElementById(event.target.id);

            var isNumber = event.target.classList.contains('number');
            var isOperator = event.target.classList.contains('operators');
            var isCleaner = event.target.classList.contains('cleaners');

            if (isDisabled) {
                var buttons = document.getElementsByClassName("operators");
                document.getElementById("idPositiveOrNegative").disabled = false;
                document.getElementById("idPoint").disabled = false;
                for (let button of buttons) {
                        if (button.id != "idEqual") {
                            button.disabled = false;
                        }
                }
                displayedNumber = "0";
                displayedOperation = "";
                isDisabled = false;
            }

            if (isNumber) {
                displayedNumber = setupNumber(buttonNumbersArea.value);
            } else if (isOperator) {
                var response = setupOperator(buttonNumbersArea.value);
                displayedNumber = response[0];
                displayedOperation = response[1];
            } else if (isCleaner) {
                if (buttonNumbersArea.value == "c") {
                    displayedNumber = clearAll(displayedNumber);
                } else if (buttonNumbersArea.value == "ce") {
                    var response = deleteNumber(displayedNumber);
                    displayedNumber = response[0];
                    if (response[1] != null){
                        displayedOperation = response[1];
                    }
                } else if (buttonNumbersArea.value == "cl") {
                    displayedNumber = backspace(displayedNumber);
                }
            }

            fieldDisplayOperation.value = displayedOperation;
            fieldDisplayNumber.value = formatDisplayedNumber(displayedNumber);
        }

        function setupNumber(numberCharacter) {

            if ((lastOperatorEqual) && (isReseted == false)) {
                displayedNumber = "0";
                isSecondNumber = false;
                secondNumberChanged = false;
                firstNumber = null;
                secondNumber = null;
                displayedOperation = "";
                formatOperationToDisplay = null;
                firstNumberToDisplay  = null;
                secondNumberToDisplay = null;
                isSecondNumberToDisplay = false;
                isReseted = true;
                
            } else if ((isSecondNumber) && (secondNumberChanged == false)) {
                displayedNumber = "0";
                secondNumberChanged = true;
            }
            
            var isPoint = true;
            var isNegative = false;
    
            for (let index = 0; index < displayedNumber.length; index++) {
                if(displayedNumber.charAt(index) == ",") {
                    isPoint = false;
                }  
                if(displayedNumber.charAt(index) == "-") {
                    isNegative = true;
                } 
            }

            if (displayedNumber.length < 16) {
                switch (numberCharacter) {
                    case ",":
                        if (isPoint) {
                            displayedNumber += numberCharacter;
                        } 
                        break;
                    case "+/-":
                        if (isNegative) {
                            displayedNumber = displayedNumber.slice(1);
                        } else if (displayedNumber != 0){
                            displayedNumber = "-" + displayedNumber;
                        }
                        break;
                    default:
                        if (displayedNumber == "0") {
                            displayedNumber = numberCharacter;
                        } else {
                            displayedNumber += numberCharacter;
                        }
                        break;
                }
            }
            
            return displayedNumber;
        }

        function setupOperator(operator) {

            var number = convertStringToNumber(displayedNumber);

            if ((lastOperatorEqual) && (operator != "=")) {

                if ((operator == "squared") || (operator == "squareroot") || (operator == "inverse")) {
                    firstNumber = null;
                    arithmeticOperator = "";
                    secondNumber = null;
                    calcResult = null;
                    isSecondNumber = false;
                    secondNumberChanged = false;
                    isSecondNumberToDisplay = false;
                    lastOperatorEqual = false;
                } else if (operator == "%") {
                    firstNumber = null;
                    secondNumber = null;
                    isSecondNumber = false;
                    secondNumberChanged = false;
                    isSecondNumberToDisplay = false;
                    lastOperatorEqual = false;
                } else {
                    firstNumber = calcResult;
                    calcResult = null;
                    secondNumber = null;
                    secondNumberChanged = false;
                    isSecondNumberToDisplay = false;
                    lastOperatorEqual = false;
                }

            } else if ((lastOperatorEqual) && (operator == "=")) {
                firstNumber = calcResult;
                calcResult = null;
                isSecondNumberToDisplay = false;
            }

            switch (operator) {
                case "inverse":
                    if (number == 0) {
                        displayedNumber = "Não é possível dividir por zero";
                        displayedOperation = setupOperation(operator, number);
                        isDisabled = true;
                        var buttons = document.getElementsByClassName("operators");
                        document.getElementById("idPositiveOrNegative").disabled = true;
                        document.getElementById("idPoint").disabled = true;
                        for (let button of buttons) {
                                if (button.id != "idEqual") {
                                    button.disabled = true;
                                }
                        }
                        return [displayedNumber, displayedOperation];
                    } else {
                        if ((firstNumber != null) && (arithmeticOperator != "")) {
                            secondNumber = (1 / number);
                            displayedNumber = convertNumberToString(secondNumber);
                        } else {
                            firstNumber = (1 / number);
                            displayedNumber = convertNumberToString(firstNumber);
                        }
                        displayedOperation = setupOperation(operator, number);
                        return [displayedNumber, displayedOperation];
                    }
                    break;
                case "squared":
                    if ((firstNumber != null) && (arithmeticOperator != "")) {
                        secondNumber = Math.pow(number, 2);
                        displayedNumber = convertNumberToString(secondNumber);
                    } else {
                        firstNumber = Math.pow(number, 2);
                        displayedNumber = convertNumberToString(firstNumber);
                    }
                    displayedOperation = setupOperation(operator, number);
                    return [displayedNumber, displayedOperation];
                    break;
                case "squareroot":   
                    if ((firstNumber != null) && (arithmeticOperator != "")) {
                        secondNumber = Math.sqrt(number)
                        displayedNumber = convertNumberToString(secondNumber);
                    } else {
                        firstNumber = Math.sqrt(number)
                        displayedNumber = convertNumberToString(firstNumber);
                    }
                    displayedOperation = setupOperation(operator, number);
                    return [displayedNumber, displayedOperation];
                    break;
                case "%":
                    if ((calcResult != null) && (arithmeticOperator != null)) {

                        if ((arithmeticOperator == "+") || (arithmeticOperator == "-")) {
                            firstNumber = (calcResult * number) / 100;
                        } else {
                            firstNumber = number / 100;
                        }
                        arithmeticOperator = "";
                        displayedNumber = convertNumberToString(firstNumber);
                        displayedOperation = setupOperation(operator, firstNumber);
                        return [displayedNumber, displayedOperation];

                    } else if ((secondNumber == null) && (arithmeticOperator == "")) {

                        firstNumber = 0;
                        displayedNumber = convertNumberToString(firstNumber);
                        displayedOperation = setupOperation(operator, firstNumber);
                        return [displayedNumber, displayedOperation];

                    } else if ((firstNumber != null) && (arithmeticOperator != "")) {

                        secondNumber = number;

                        if ((arithmeticOperator == "+") || (arithmeticOperator == "-")) {
                            secondNumber = (firstNumber * secondNumber) / 100;
                        } else {
                            secondNumber = secondNumber / 100;
                        }

                        displayedNumber = convertNumberToString(secondNumber);
                        displayedOperation = setupOperation(operator, secondNumber);
                        return [displayedNumber, displayedOperation];
                    }
                    break;
                case "=":
                    if (firstNumber == null) {
                        firstNumber = number;
                        displayedNumber = convertNumberToString(firstNumber);
                        displayedOperation = setupOperation(operator, firstNumber);
                    } else if ((firstNumber != null) && (arithmeticOperator != "")) {
                        if (secondNumber == null) {
                            secondNumber = convertStringToNumber(number);
                        }
                        displayedNumber = calculate(operator);
                        if (isSecondNumberToDisplay == false) {
                            displayedOperation = setupOperation(operator, firstNumber);
                        } else {
                            displayedOperation = setupOperation(operator, secondNumber);
                        }
                        return [displayedNumber, displayedOperation];
                    }
                    break;
                default:
                    if ((secondNumberChanged)) {
                        if (secondNumber == null) {
                            secondNumber = convertStringToNumber(number);
                        }

                        displayedNumber = calculate(operator);
                        displayedOperation = setupOperation(operator, firstNumber);
                        return [displayedNumber, displayedOperation];
                    } else {
                        if (firstNumber == null) {
                            firstNumber = convertStringToNumber(number);
                        }
                        arithmeticOperator = operator;
                        displayedOperation = setupOperation(operator, firstNumber);
                        isSecondNumber = true;
                        return [displayedNumber, displayedOperation];
                    }
                    break;
            }
        }

        function calculate(operator) {
               
            switch (arithmeticOperator) {
                case "+":
                    calcResult = firstNumber + secondNumber;
                    break;
                case "-":
                    calcResult = firstNumber - secondNumber;
                    break;
                case "*":
                    calcResult = firstNumber * secondNumber;
                    break;
                case "/":
                    calcResult = firstNumber / secondNumber;
                    break;
                default:
                    break;
            }

            displayedNumber = convertNumberToString(calcResult);

            if (operator != "=") {
                firstNumber = calcResult;
                calcResult = null;
                arithmeticOperator = operator;
                secondNumber = null;
                secondNumberChanged = false;
                lastOperatorEqual = false;
                isSecondNumberToDisplay = false;
                isFormated = false;
            }

            return displayedNumber;    
        }   

        function setupOperation(operator, number) {

            switch (operator) {
                case "squared":
                    if (formatOperationToDisplay == null) {
                        formatOperationToDisplay = "sqr(" + convertNumberToString(number) + ")";
                    } else {
                        formatOperationToDisplay = "sqr(" + formatOperationToDisplay + ")";
                    }
                    isFormated = true;
                    if (isSecondNumberToDisplay) {
                        secondNumberChanged = true;
                    }
                    break;
                case "squareroot":
                    if (formatOperationToDisplay == null) {
                        formatOperationToDisplay = "√(" + convertNumberToString(number) + ")";
                    } else {
                        formatOperationToDisplay = "√(" + formatOperationToDisplay + ")";
                    }
                    isFormated = true;
                    if (isSecondNumberToDisplay) {
                        secondNumberChanged = true;
                    }
                    break;
                case "inverse":
                    if (formatOperationToDisplay == null) {
                        formatOperationToDisplay = "1/(" + convertNumberToString(number) + ")";
                    } else {
                        formatOperationToDisplay = "1/(" + formatOperationToDisplay + ")";
                    }
                    isFormated = true;
                    if (isSecondNumberToDisplay) {
                        secondNumberChanged = true;
                    }
                    break;
                case "%":
                    if (isSecondNumberToDisplay) {
                        secondNumberToDisplay = number;
                    } else {
                        firstNumberToDisplay = number;
                    }
                    if (isSecondNumberToDisplay) {
                        secondNumberChanged = true;
                    }
                    formatOperationToDisplay = null;
                    isFormated = false;
                    break;
                case "=":
                    if ((lastOperatorEqual)) {
                        firstNumberToDisplay = number;
                        secondNumberToDisplay = secondNumber;
                    } else if ((isSecondNumberToDisplay) && (isFormated == false)) {
                        secondNumberToDisplay = number;
                    } else if (isFormated == false) {
                        firstNumberToDisplay = number;
                    }
                    lastOperatorEqual = true;
                    isReseted = false;
                    formatOperationToDisplay = null;
                    isFormated = false;
                    break;
                default:
                    if ((isSecondNumberToDisplay) && (isFormated == false)) {
                        secondNumberToDisplay = number;
                    } else if (isFormated == false) {
                        firstNumberToDisplay = number;
                    }
                    break;
            }

            if ((operator == "squared") || (operator == "squareroot") || (operator == "inverse")) {
                if (isSecondNumberToDisplay) {
                    secondNumberToDisplay = formatOperationToDisplay;
                } else {
                    firstNumberToDisplay = formatOperationToDisplay;
                }
            }

            if ((arithmeticOperator != "") && (isSecondNumberToDisplay == false)) {
                formatOperationToDisplay = null;
                isSecondNumberToDisplay = true;
                isFormated = false;
            }

            var isNotEqual = ((operator == "+") || (operator == "-") || (operator == "*") || (operator == "/"));
            
            var operatorToDisplay = arithmeticOperator;

            if (operatorToDisplay == "*") {
                operatorToDisplay = "x";
            } else if (operatorToDisplay == "/") {
                operatorToDisplay = "÷";
            }

            if (operator == "*") {
                operator = "x";
            } else if (operator == "/") {
                operator = "÷";
            }

            if ((firstNumberToDisplay != null) && (operatorToDisplay != "") && (secondNumberToDisplay != null) && (operator == "=")) {
                displayedOperation = firstNumberToDisplay + " " + operatorToDisplay + " " + secondNumberToDisplay + " " + operator;

            } else if ((firstNumberToDisplay != null) && (operatorToDisplay != "") && (secondNumberToDisplay != null) && (isNotEqual)) {
                displayedOperation = firstNumberToDisplay + " " + operator;

            } else if ((firstNumberToDisplay != null) && (operatorToDisplay != "") && (secondNumberToDisplay != null)) {
                displayedOperation = firstNumberToDisplay + " " + operatorToDisplay + " " + secondNumberToDisplay;

            } else if ((firstNumberToDisplay != null) && (operator == "=")) {
                displayedOperation = firstNumberToDisplay + " " + operator;

            } else if ((firstNumberToDisplay != null) && (operatorToDisplay != "")) {
                displayedOperation = firstNumberToDisplay + " " + operatorToDisplay;

            } else if (firstNumberToDisplay != null) {
                displayedOperation = firstNumberToDisplay
            }

            return displayedOperation;
        }
            
        function backspace(number) {

                if (number == "-0,") {
                    number = "0";
                } else if ((number < 0) && (number.length == 2)) {
                    number = "0";
                } else if (number.length > 1) {
                    number = number.slice(0, -1);
                } else if (number.length == 1){
                    number = "0";
                }

            return number;
        }

        function deleteNumber(number) {
            if (lastOperatorEqual) {
                number = clearAll(number);
            } else if (secondNumberChanged) {
                number = "0";
                secondNumber = null;
                displayedOperation = firstNumberToDisplay + " " + arithmeticOperator;
                formatOperationToDisplay = null;
                isFormated = false;
            } else {
                number = "0";
                firstNumber = null;
                formatOperationToDisplay = null;
                isFormated = false;
            }

            return [number, displayedOperation];
        }

        function clearAll(number) {

            number = "0";
            isSecondNumber = false;
            secondNumberChanged = false;
            lastOperatorEqual = false;
            isDisabled = false;
            firstNumber = null;
            secondNumber = null;
            calcResult = null;
            arithmeticOperator = "";
            displayedOperation = "";
            formatOperationToDisplay = null;
            isFormated = false;
            firstNumberToDisplay  = null;
            secondNumberToDisplay = null;
            isSecondNumberToDisplay = false;

            return number;
        }

        function convertNumberToString(number) {
            number = number.toString().replace(".",",");
            return String(number);
        }

        function convertStringToNumber(number){
            number = String(number).replace(",",".");
            return Number(number);
        }

        function formatDisplayedNumber(number) {
            var numberFormated = "";

            var indexOfMinus = number.indexOf("-");
            if (indexOfMinus == 0){
                number = number.substring(1);
            }

            if (number.indexOf(",") > 0) {
                var numberArray = number.split(",");
                var beforeComma = numberArray[0];
                var afterComma = numberArray[1];
                numberFormated = beforeComma.replace(/(?=(?:\d{3})+$)(?!^)/g, '.');
                numberFormated += "," + afterComma; 
            } else {
                numberFormated = number.replace(/(?=(?:\d{3})+$)(?!^)/g, '.');
            }

            if (indexOfMinus == 0) {
                numberFormated = "-" + numberFormated;
            }
            
            return numberFormated;
        }

           
    </script>
    
</body>
</html>